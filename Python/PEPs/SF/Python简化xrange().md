# PEP 260 -- Python简化xrange()

|PEP编号:|260|
|:----|:----|
|标题:|Python简化xrange()|
|作者:|guido at python.org (Guido van Rossum)|
|状态:|Final|
|类型:|Standards Track|
|创建时间:|26-Jun-2001|
|Python版本:|2.2|
|上传历史|26-Jun-2001
---
内容

*   [摘要](#摘要)
*   [问题](问题)
*   [建议解决方案](#建议解决方案)
*   [范围](#范围)
*   [风险](#风险)
*   [如何过渡](#如何过渡)
*   [版权](#版权)

[摘要](#摘要)
=====================
本PEP建议将xrange()中一些不常用的功能剥离出去，比如：x[i:j] 和 x*n的用法。

[问题](#问题)
=====================
xrange()的惯用方法时：
```python
    for i in xrange(...): ...
```
对于以上代码中的i,有一些很少被用到的特性。一些类似于序列化的功能。因为这些原因，在历史上，发生过一些严重的错误（有一些错误产生的错误）。而这些问题，在多个版本的迭代中并没有被发现。

做好去掉这些很少被使用的特性。简化xrange的实现、测试和文档。降低维护成本和代码量。

[建议解决方案](#建议解决方案)
=====================
建议将xrange()对象的其他特性剥离。只保留以下序列化的特性:x[i],len(x)和repr(x)。
尤其是，以下特性需要被删除：
```python
    x[i:j] #切片
    x*n,n*x #数列复制
    cmp(x1,x2) #比较
    i in x  # 包含
    x.tolist() #tolist方法
    x.start,x.stop,x.step #这些属性
```
建议删除RyRange_New() C API 的第四个参数（重复次数）。
通过使用自定义的迭代器类型，可以增加一般情况的速度。但是这些都是可选的（默认的序列迭代器做的很好）


[范围](#范围)
=====================
本PEP将影响内建函数 xrange() 和RyRange_New() C API 。


[风险](#风险)
=====================
部分人已经使用了这些扩展功能，所编写的旧代码将不被兼容。但是，考虑到这些功能中的历史问题已经很久了，应该不会有很多代码使用到他们，所以影响面应该很小。

[如何过渡](#如何过渡)
=====================
为了保证向后的兼容性，这些功能在Python2.2中仍可使用，但是会触发警告。在Python2.2下一个年的发布版中（可能是2.4），这篇PEP的内容将被实施。

[版权](#版权)
=====================
本文档已公开。

（译者：在python3中已经不支持xrange了，已经基本被range替代.）


